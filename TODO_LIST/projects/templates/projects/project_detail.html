{% extends "base.html" %}
{% block title %}Detalhes do Projeto{% endblock %}

{% block content %}
<section class="min-h-[60vh] flex items-center justify-center">
  <div class="w-full max-w-3xl bg-white rounded-xl shadow-lg p-8 space-y-6">

    <!-- Título -->
    <h1 class="text-3xl font-bold text-gray-800">Detalhes do Projeto</h1>

    <!-- Informações -->
    <div class="space-y-4 text-gray-700">
      <div>
        <span class="inline-block font-semibold w-40">Nome:</span>
        {{ project.name }}
      </div>

      <div>
        <span class="inline-block font-semibold w-40">Responsável:</span>
        {{ project.owner }}
      </div>

      <div>
        <span class="inline-block font-semibold w-40">Descrição:</span>
        {{ project.description }}
      </div>
      <div>
        <span class="inline-block font-semibold w-40">Data de Início:</span>
        {{ project.start_date }}
      </div>
      <div>
        <span class="inline-block font-semibold w-40">Data de Fim:</span>
        {{ project.end_date }}
      </div>
      <div>
        <span class="inline-block font-semibold w-40">Status:</span>
        {{ project.get_status_display }}
      </div>
      <div>
        <span class="inline-block font-semibold w-40 align-top">Participantes:</span>
        <ul class="list-disc pl-5">
          {% for participant in project.participants.all %}
            <li>{{ participant }}</li>
          {% empty %}
            <li>Nenhum participante.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <!-- Ações -->
    <div class="flex flex-col sm:flex-row justify-between gap-4 pt-4">
      <a href="{% url 'project-edit' project.pk %}" class="w-full sm:w-auto text-center bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow transition">
        Editar
      </a>
      <a href="javascript:history.back()" class="w-full sm:w-auto text-center bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg shadow transition">
        Voltar
      </a>
    </div>
    <div class="mt-8">
  <h2 class="text-xl font-semibold mb-4 text-gray-800">Tarefas deste Projeto</h2>

 <a href="{% url 'task-create' project.pk %}"
   class="inline-block mb-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition">
   Adicionar Tarefa
</a>

  
  {% if tasks %}
    <ul class="space-y-4">
      {% for task in tasks %}
        <li class="p-4 border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 transition">
          <h3 class="text-lg font-bold text-indigo-600">{{ task.name }}</h3>
          <p class="text-gray-600">{{ task.description|default:"Sem descrição" }}</p>
          <p class="text-sm text-gray-500 mt-1">Responsáveis: 
            {{ task.assigned_to }}
          </p>
          {%if task.assigned_to or task.owner == request.user%}
          <a href="{% url 'task-detail' task.pk %}" class="text-indigo-600 hover:underline text-sm">Ver detalhes</a>
          {%endif%}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-500">Nenhuma tarefa registrada para este projeto ainda.</p>
  {% endif %}
</div>


  </div>
</section>
{% endblock %}
