{% extends "base.html" %}
{% block title %}Detalhes - {{ task.name }}{% endblock %}
{% block page_title %}Detalhes da Tarefa{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow space-y-4">
  <h2 class="text-2xl font-semibold">{{ task.name }}</h2>

  <dl class="grid grid-cols-1 gap-2">
    <div>
      <dt class="font-medium text-sm">Projeto</dt>
      <dd class="text-sm">{{ task.project.name }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Descrição</dt>
      <dd class="text-sm">{{ task.description|linebreaksbr|default:"—" }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Status</dt>
      <dd class="text-sm">{{ task.get_status_display }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Prioridade</dt>
      <dd class="text-sm">{{ task.get_priority_display }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Responsável</dt>
      <dd class="text-sm">{{ task.assigned_to.name|default:"—" }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Proprietário</dt>
      <dd class="text-sm">{{ task.owner.name|default:"—" }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Início / Fim</dt>
      <dd class="text-sm">{{ task.start_date|date:"d/m/Y" }} — {{ task.end_date|date:"d/m/Y" }}</dd>
    </div>
    <div>
      <dt class="font-medium text-sm">Completada em</dt>
      <dd class="text-sm">{{ task.completed_at|date:"d/m/Y H:i" }}</dd>
    </div>
  </dl>

  <div class="flex gap-3 mt-4">
    {% if task.status != 'completed' %}
      <a href="{% url 'task-complete' task.pk %}" class="bg-green-600 text-white px-4 py-2 rounded">Concluir</a>
    {% endif %}
    {% if task.status != 'canceled' %}
      <a href="{% url 'task-cancel' task.pk %}" class="bg-red-600 text-white px-4 py-2 rounded">Cancelar</a>
    {% endif %}
    {% if task.owner == request.user %}
      <a href="{% url 'task-update' task.pk %}" class="bg-indigo-600 text-white px-4 py-2 rounded">Editar</a>
      <a href="{% url 'task-delete' task.pk %}" class="bg-gray-200 px-4 py-2 rounded">Deletar</a>
    {% endif %}
    <a href="javascript:history.back()" class="bg-gray-100 px-4 py-2 rounded">Voltar</a>
  </div>
</div>
{% endblock %}
